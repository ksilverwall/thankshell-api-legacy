<html>

<head>
    <meta charset='utf-8'>
    <title>Login to SLA Bank</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.2/normalize.min.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css'>
</head>

<body>
    <div class="container">
        <h2 class="login-heading">ログイン</h2>
        <form class="login">
            <p id="message" class='text-danger'></p>
            <!-- Login Form -->
            <div id='login-form-body'>
                <div class="form-group">
                    <label for="inputUserName">ユーザー名</label>
                    <input type="text" id="inputUserName" placeholder="User Name" required autofocus></input>
                </div>
                <div class="form-group">
                    <label for="intpuPassword">パスワード</label>
                    <input type="password" id="inputPassword" placeholder="Password" required></input>
                </div>
                <input type="button" id="login-button" class="button-primary" value="ログイン"></input>

                <div class="form-group">
                    <a id="link-to-send-reset-code" href="#">パスワードを忘れた場合はこちら</a>
                </div>
            </div>

            <!-- Reset Reset Code Form -->
            <div id='send-reset-code-body' style="display:none">
                <p>登録メールアドレスに認証コードを送信します</p>
                <div class="form-group">
                    <label for="inputUserName">ユーザー名</label>
                    <input type="text" id="reset-user-name" placeholder="User Name" required autofocus></input>
                </div>
                <input type="button" id="send-reset-code-button" class="btn btn-primary disabled" value="送信" disabled/>
            </div>

            <!-- Reset Password Form -->
            <div id='new-password-form-body' style="display:none">
                <div class="form-group">
                    <label for="auth-code">認証コード</label>
                    <input type="text" id="auth-code" placeholder="Auth code" required></input>
                </div>
                <div class="form-group">
                    <label for="intputNewPassword1">新パスワード</label>
                    <input type="password" id="inputNewPassword1" placeholder="New Password" required></input>
                </div>
                <div class="form-group">
                    <label for="intputNewPassword2">新パスワード（確認）</label>
                    <input type="password" id="inputNewPassword2" placeholder="New Password" required></input>
                </div>
                <input type="button" id="reset-password-button" class="button-primary" value="変更"></input>
            </div>
            <input type="hidden" id="redirectPath" value="wallet"></input>
        </form>
    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.263.1.min.js"></script>
    <script src="https://s3-ap-northeast-1.amazonaws.com/sla-bank/auth/dist/aws-cognito-sdk.min.js"></script>
    <script src="https://s3-ap-northeast-1.amazonaws.com/sla-bank/auth/dist/amazon-cognito-identity.min.js"></script>
    <script src='https://s3-ap-northeast-1.amazonaws.com/sla-bank/auth/auth.js'></script>
    <script type='text/javascript'>
        // for reset form
        $('#reset-user-name').keyup(function() {
            if ($('#reset-user-name').val().length === 0) {
                $('#send-reset-code-button').addClass('disabled');
                $('#send-reset-code-button').prop('disabled', true);
            } else {
                $('#send-reset-code-button').removeClass('disabled');
                $('#send-reset-code-button').prop('disabled', false);
            }
        });
        $('#send-reset-code-button').click(upsample.sendResetCode);
        $('#link-to-send-reset-code').click(function(){upsample.setState('SendResetCode')});
        // for reset form
        $('#login-button').click(upsample.login);
        // for reset form
        $('#reset-password-button').click(upsample.resetPassword);
    </script>
</body>

</html>
